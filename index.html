
<html>
<head>
  <title></title>

  <!-- Simulate IE6/7 -->
  <script type="text/javascript">
    window.postMessage = null;
  </script>

  <!-- jQuery -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <!-- XDomain -->
  <script src="dist/xdomain.js"></script>
  <!-- Demo -->
  <script type="text/javascript">

  !function() {

    var slave, path;

    if(location.origin === 'http://abc.example.com:3000') {
      slave = 'http://xyz.example.com:3000';
    } else if(location.origin === 'http://a.example.com:8888') {
      slave = 'http://b.example.com:8888';
    } else if(location.origin === 'http://xdomain.jpillora.com') {
      slave = 'http://jpillora.com';
    } else {
      return console.warn('demo slave mismatch');
    }

    var slaves = {};
    slaves[slave] = '/xdomain/example/proxy.html'

    $.xdomain({
      slaves: slaves
    });

    $.get(slave + '/xdomain/example/data.json').always(function() {
      console.log("got result from '",slave,"':", arguments);
    });

  }();
  </script>
</head>
<body>

  <h3>XDomain Demo</h3>

  <h4 id="host"></h4>
  <script type="text/javascript">
    document.getElementById('host').innerHTML = window.location.origin;
  </script>

  <h4>Check your console</h4>

</body>
</html>


